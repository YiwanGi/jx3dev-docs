# 开放接口

### controller：`open`

###### 温馨提示：本页接口无需提供dev-token，服务器可能会记录您的详细访问信息。

#### http 限定

- [`user_login` 用户登录](#user_login)
- [`user_logout` 登录注销](#user_logout)
- [`user_register` 用户注册](#user_register)
- [`user_resetpwd` 重置密码](#user_resetpwd)
- [`sms_captcha_send` 发送验证码](#sms_captcha_send)
- [`sms_captcha_check` 检查验证码](#sms_captcha_check)

### `user_login`

##### 用户登录

#### 参数

| 字段名        | 数据类型       | 默认值 | 说明  | 必须  |
|------------|------------|-----|-----|:---:|
| `mobile`   | int(11)    | -   | 手机号 |  √  |
| `password` | string(32) | -   | 密码  |  √  |

#### 响应数据

| 字段名             | 数据类型       | 说明        |
|-----------------|------------|-----------|
| `bindQQ`        | ?int       | 绑定QQ      |
| `devToken`      | string(16) | Dev token |
| `vipExpireTime` | int(10)    | 会员到期时间    |

### `user_logout`

##### 登录注销

#### 参数

| 字段名        | 数据类型       | 默认值 | 说明        | 必须  |
|------------|------------|-----|-----------|:---:|
| `devToken` | string(16) | -   | Dev token |  √  |

:::tip
该 API 无响应数据。
:::

### `user_register`

##### 用户注册

#### 参数

| 字段名        | 数据类型       | 默认值 | 说明                                           | 必须  |
|------------|------------|-----|----------------------------------------------|:---:|
| `mobile`   | int(11)    | -   | 手机号                                          |  √  |
| `captcha`  | string(6)  | -   | [验证码](#sms_captcha_send)                     |  √  |
| `password` | string(32) | -   | 密码<font color="gray">(推荐使用双层md5加密后的值)</font> |  √  |

:::tip
该 API 无响应数据。
:::

### `user_resetpwd`

##### 重置密码

#### 参数

| 字段名           | 数据类型       | 默认值 | 说明                                            | 必须  |
|---------------|------------|-----|-----------------------------------------------|:---:|
| `mobile`      | int(11)    | -   | 手机号                                           |  √  |
| `captcha`     | string(6)  | -   | [验证码](#sms_captcha_send)                      |  √  |
| `newPassword` | string(32) | -   | 新密码<font color="gray">(推荐使用双层md5加密后的值)</font> |  √  |

:::tip
该 API 无响应数据。
:::

### `sms_captcha_send`

##### 发送验证码

#### 参数

| 字段名      | 数据类型    | 默认值 | 说明   | 必须  |
|----------|---------|-----|------|:---:|
| `mobile` | int(11) | -   | 手机号  |  √  |
| `event`  | string  | -   | 事件名称 |  √  |

###### `event` 字段支持以下事件值

| 事件   | 值           |
|------|-------------|
| 用户注册 | `register`  |
| 重置密码 | `resetpwd`  |

#### 响应数据

| 字段名      | 数据类型            | 说明                                          |
|----------|-----------------|---------------------------------------------|
| `status` | enum(-2,-1,0,1) | 状态<font color="gray">(0:发送失败,1:发送成功)</font> |

###### `status` 字段负值说明

| 值    | 说明     |
|------|--------|
| `-2` | 发送受到限制 |
| `-1` | 发送过于频繁 |

### `sms_captcha_check`

##### 检查验证码

#### 参数

| 字段名       | 数据类型      | 默认值 | 说明                       | 必须  |
|-----------|-----------|-----|--------------------------|:---:|
| `mobile`  | int(11)   | -   | 手机号                      |  √  |
| `event`   | string    | -   | 事件名称                     |  √  |
| `captcha` | string(6) | -   | [验证码](#sms_captcha_send) |  √  |

###### `event` 字段支持以下事件值

| 事件   | 值          |
|------|------------|
| 用户注册 | `register` |
| 重置密码 | `resetpwd` |

#### 响应数据

| 字段名           | 数据类型 | 说明                                      |
|---------------|------|-----------------------------------------|
| `readSeconds` | int  | 读秒<font color="gray">(-1:验证码不可用)</font> |
